load bb.mat
order=2;
trmat=mc_model(bb,order);

samples=100;

for i=1:order
    newmel(i)=bb(i);
end

%%

for i=order:samples
%     for j=1:order
%         ind(j)=newmel((i-order):(i-1));
%     end
    (i-order+1):(i-1+1)
    ind(:)=newmel((i-order+1):(i-1+1));
    str=['trmat('];
    for j=1:length(ind)
       str=[str num2str(ind(j)) ','];
    end
    str=[str ':); '];
    a=row_to_probs(squeeze(eval(str)));
    i
    newmel(i)=a(randi(length(a)));
    %%pause
end


