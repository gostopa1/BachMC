(
MIDIClient.init;
MIDIIn.connectAll;
//MIDIOut.connect[];

// Create task
t = Task({


	// Set attributes of each node
	// [freq, dur, [[next_state, weighted_random],…]]
	var node_list =[
[[88], 105 ,[[163,1]],[0.11]],
[[86], 105 ,[[2,1],[108,1],[163,2]],[0.11,0.11,0.22,0.22]],
[[85], 105 ,[[107,1]],[0.11]],
[[84], 106 ,[[4,2],[118,2],[124,2]],[0.22,0.22,0.11,0.22,0.22,0.22]],
[[83], 105.5 ,[[6,2],[16,2],[118,2],[193,2]],[0.11,0.22,0.11,0.11,0.28,0.11,0.22,0.45]],
[[82], 106 ,[[6,2],[39,2],[111,2]],[0.22,0.22,0.11,0.22,0.45,0.22]],
[[81], 106.1429 ,[[4,4],[8,2],[17,2],[111,2],[116,2],[124,2]],[0.11,0.28,0.22,0.22,0.11,0.11,0.11,0.22,0.22,0.22,0.22,0.11,0.22,0.22]],
[[80], 105 ,[[159,2]],[0.11,0.67]],
[[79], 105.7143 ,[[6,6],[9,2],[149,2],[170,4]],[0.11,0.22,0.67,0.11,0.22,0.11,0.11,0.22,0.22,0.22,0.45,0.22,0.22,0.22]],
[[77], 105.4444 ,[[3,2],[25,2],[33,1],[115,4],[147,2],[148,2],[170,4],[187,1]],[0.28,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.45,0.11,0.45,0.22,0.11,0.22,0.22]],
[[77,89], 105 ,[[153,1]],[0.22]],
[[77,81], 105.5 ,[[19,4],[136,8],[170,4]],[0.11,0.11,0.22,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.22,0.11,0.11,0.22,0.22]],
[[77,81,84,89], 105 ,[[152,1]],[0.22]],
[[77,80,89], 106.3333 ,[[24,2],[150,2],[192,2]],[0.22,0.22,0.22,0.11,0.11,0.11]],
[[76], 107.5789 ,[[25,4],[42,2],[111,2],[129,5],[138,4],[163,2]],[0.11,0.22,0.9,0.22,0.45,0.11,0.22,0.22,0.22,0.22,0.11,0.22,0.11,0.45,0.22,0.11,0.22,0.22,0.11]],
[[76,88], 105 ,[[109,1],[166,1]],[0.22,0.22]],
[[76,84], 106.3182 ,[[26,2],[27,1],[56,2],[104,1],[129,8],[145,2],[187,3],[193,2]],[0.11,0.22,0.11,0.22,0.22,0.11,0.11,0.22,0.11,0.22,0.28,0.11,0.28,0.22,0.11,0.28,0.22,0.22,0.22,0.11,0.22,0.22]],
[[76,81], 106.5 ,[[102,2],[124,2]],[0.28,0.11,0.22,0.22]],
[[76,80,83,88], 105 ,[[174,2],[189,2]],[0.11,0.28,0.22,0.22]],
[[76,79], 106.3 ,[[16,4],[29,4],[102,2],[152,4],[170,6]],[0.22,0.11,0.11,0.22,0.22,0.28,0.22,0.11,0.11,0.22,0.11,0.22,0.22,0.28,0.22,0.22,0.11,0.45,0.11,0.28]],
[[76,79,88], 105 ,[[167,2]],[0.22,0.11]],
[[75], 105 ,[[7,2],[21,3],[39,1]],[0.11,0.22,0.22,0.22,0.22,0.67]],
[[75,87], 105 ,[[13,2],[15,1],[30,1],[110,1],[161,1],[186,1],[190,1]],[0.22,0.22,0.45,0.11,0.45,0.22,0.22,0.11]],
[[75,81,83,87], 105 ,[[18,2],[189,2]],[0.11,0.28,0.11,0.22]],
[[75,79,87], 107 ,[[150,2]],[0.22,0.22]],
[[74], 106.08 ,[[9,2],[14,5],[33,6],[53,2],[114,2],[116,2],[129,2],[170,4]],[0.22,0.11,0.22,0.22,0.45,0.11,0.28,0.11,0.22,0.11,0.11,0.22,0.11,0.11,0.22,0.11,0.22,0.22,0.22,0.11,0.22,0.22,0.22,0.45,0.11]],
[[74,86], 105.6667 ,[[119,4],[140,2],[145,2],[174,1]],[0.11,0.11,0.22,0.11,0.11,0.11,0.11,0.11,0.11]],
[[74,83], 105 ,[[103,1]],[0.28]],
[[74,81,83,86], 105 ,[[23,2],[188,2]],[0.11,0.22,0.22,0.22]],
[[74,77], 106.2188 ,[[11,4],[19,4],[37,8],[129,4],[152,2],[170,2],[176,4],[184,4]],[0.22,0.22,0.22,0.22,0.11,0.28,0.22,0.22,0.22,0.11,0.11,0.11,0.28,0.22,0.22,0.11,0.22,0.22,0.11,0.11,0.22,0.11,0.22,0.22,0.22,0.11,0.11,0.11,0.11,0.22,0.22,0.11]],
[[73,85], 107.2 ,[[34,2],[154,2],[159,2],[161,2],[186,2]],[0.22,0.22,0.11,0.22,0.22,0.11,0.62,0.22,0.11,0.22]],
[[73,81,85], 105 ,[[28,2],[188,2]],[0.11,0.22,0.22,0.45]],
[[73,77,85], 111.5 ,[[39,2],[190,1],[194,1]],[0.45,0.22,0.22,0.62]],
[[72], 107.0909 ,[[8,1],[14,4],[25,5],[33,3],[40,4],[53,6],[111,2],[129,2],[130,2],[143,1],[145,6],[152,5],[170,14]],[0.11,0.22,0.11,0.11,0.9,0.28,0.11,0.45,0.11,0.28,0.22,0.22,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.22,0.11,0.11,0.22,0.22,0.22,0.45,0.22,0.22,0.11,0.11,0.22,0.22,0.11,0.22,0.11,0.62,0.22,0.22,0.22,0.67,0.22,0.11,0.22,0.22,0.11,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.45,0.22]],
[[72,84], 106.7692 ,[[30,2],[48,5],[122,1],[159,1],[160,1],[161,2],[189,1]],[0.22,0.22,0.45,0.22,0.11,0.22,0.11,0.22,0.22,0.22,0.11,0.22,0.22]],
[[72,81], 105 ,[[9,2],[42,2]],[0.22,0.28,0.22,0.11]],
[[72,81,84], 106.25 ,[[31,2],[116,6],[181,6],[188,2]],[0.11,0.22,0.22,0.28,0.11,0.22,0.11,0.22,0.11,0.11,0.11,0.45,0.22,0.22,0.22,0.22]],
[[72,76], 106.0417 ,[[29,8],[46,4],[129,4],[136,4],[176,4]],[0.22,0.11,0.28,0.22,0.28,0.22,0.22,0.22,0.11,0.11,0.22,0.11,0.22,0.45,0.11,0.22,0.11,0.22,0.45,0.22,0.11,0.11,0.22,0.22]],
[[72,76,84], 105 ,[[45,2],[129,1],[170,1],[182,2]],[0.22,0.28,0.11,0.11,0.28,0.22]],
[[72,75,84], 105.9091 ,[[39,1],[122,2],[155,3],[159,6],[183,6],[190,4]],[0.11,0.22,0.22,0.22,0.45,0.45,0.22,0.45,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.11,0.11,0.11,0.11,0.11]],
[[71], 105.2222 ,[[33,2],[102,1],[105,1],[115,4],[136,1]],[0.11,0.11,0.45,0.22,0.22,0.22,0.11,0.22,0.22]],
[[71,83], 105 ,[[22,1],[39,1],[41,8],[81,1],[123,4],[152,5],[155,2],[162,1],[178,1]],[0.22,0.22,0.11,0.22,0.11,0.11,0.22,0.11,0.11,0.11,0.22,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.11,0.11,0.22,0.11]],
[[71,79], 107 ,[[126,2],[127,2],[163,2]],[0.22,0.22,0.22,0.11,0.22,0.22]],
[[71,77], 108 ,[[126,2],[185,2]],[0.22,0.22,0.11,0.11]],
[[71,77,83], 105 ,[[38,1],[171,1],[184,2]],[0.11,0.11,0.11,0.22]],
[[71,76,83], 105 ,[[36,2],[38,1],[57,2],[117,2],[132,1],[188,2]],[0.28,0.28,0.22,0.22,0.11,0.11,0.22,0.11,0.22,0.22]],
[[71,74], 106.875 ,[[37,4],[136,4]],[0.22,0.22,0.22,0.11,0.45,0.11,0.22,0.22]],
[[70], 107.3077 ,[[40,1],[53,6],[63,4],[111,2]],[0.11,0.28,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.22,0.22]],
[[70,82], 106.0714 ,[[41,2],[60,4],[122,3],[152,1],[159,2],[178,1],[193,1]],[0.22,0.45,0.22,0.67,0.11,0.11,0.22,0.22,0.22,0.22,0.11,0.22,0.22,0.45]],
[[70,81], 105 ,[[111,2]],[0.22,0.22]],
[[70,76], 105 ,[[33,2]],[0.22,0.22]],
[[70,76,79], 105 ,[[174,2],[187,2]],[0.11,0.11,0.22,0.11]],
[[70,74,82], 105 ,[[191,1]],[0.22]],
[[69], 105.5357 ,[[40,1],[47,1],[53,1],[63,1],[98,1],[112,2],[116,4],[124,2],[138,4],[139,2],[143,1],[152,2],[163,2],[167,2],[170,2]],[0.22,0.22,0.22,0.22,0.11,0.28,0.11,0.11,0.11,0.11,0.22,0.22,0.11,0.22,0.22,0.11,0.22,0.22,0.22,0.22,0.11,0.22,0.11,0.22,0.11,0.22,0.22,0.22]],
[[69,81], 105 ,[[146,1],[185,1]],[0.45,0.22]],
[[69,79], 105 ,[[116,2]],[0.22,0.22]],
[[69,77,81], 106.5 ,[[116,12],[129,6],[136,2],[145,2],[170,12],[187,6]],[0.28,0.11,0.11,0.22,0.11,0.11,0.11,0.11,0.22,0.22,0.22,0.11,0.22,0.11,0.22,0.28,0.9,0.11,0.11,0.22,0.22,0.11,0.22,0.22,0.22,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.22,0.22,0.28,0.22,0.11,0.11,0.22]],
[[69,76,81], 105 ,[[45,2],[117,2]],[0.22,0.22,0.11,0.11]],
[[69,72,81], 105 ,[[189,1]],[0.22]],
[[68], 105 ,[[53,4],[120,1]],[0.11,0.22,0.22,0.11,0.22]],
[[68,80], 105.8929 ,[[41,2],[48,3],[60,8],[68,2],[86,1],[122,2],[123,2],[151,2],[154,1],[169,1],[175,1],[180,1],[190,1],[192,1]],[0.22,0.22,0.22,0.22,0.67,0.67,0.22,0.22,0.11,0.22,0.22,0.11,0.22,0.45,0.45,0.45,0.22,0.22,0.11,0.22,0.22,0.22,0.11,0.11,0.22,0.22,0.67,0.45]],
[[68,77,80], 105 ,[[56,1],[137,1]],[0.11,0.22]],
[[68,72,80], 116.1667 ,[[62,1],[159,2],[183,1],[190,2]],[0.22,0.22,0.22,0.11,0.11,0.11]],
[[67], 108.5 ,[[66,1],[76,1],[124,2],[136,1],[145,4],[167,2],[170,5]],[0.11,0.22,0.22,0.11,0.11,0.11,0.22,0.9,0.22,0.22,0.22,0.11,0.22,0.22,0.11,0.11]],
[[67,79], 108.1429 ,[[56,1],[62,1],[64,6],[163,1],[167,2],[183,1],[187,1],[188,1]],[0.22,0.11,0.22,0.11,0.11,0.22,0.22,0.11,0.67,0.22,0.22,0.22,0.11,0.11]],
[[67,77,79], 105 ,[[56,1],[137,1]],[0.22,0.11]],
[[67,76], 105.1818 ,[[78,1],[94,1],[129,5],[170,4]],[0.11,0.11,0.22,0.22,0.22,0.28,0.22,0.11,0.11,0.11,0.11]],
[[67,76,79], 106.4545 ,[[129,10],[152,6],[184,6]],[0.11,0.22,0.22,0.28,0.11,0.22,0.22,0.22,0.11,0.22,0.22,0.28,0.22,0.28,0.22,0.22,0.11,0.22,0.11,0.22,0.11,0.22]],
[[67,73,79], 105 ,[[157,1],[161,1],[179,1],[190,1]],[0.22,0.22,0.22,0.11]],
[[67,73,77], 105 ,[[182,1]],[0.11]],
[[67,73,76], 105 ,[[80,1]],[0.11]],
[[67,72,76], 105 ,[[78,1],[170,1]],[0.11,0.22]],
[[67,71,74,79], 110 ,[[196,1]],[0.11]],
[[67,71,74,77], 105 ,[[170,1],[184,1]],[0.11,0.22]],
[[67,70], 107.75 ,[[138,8]],[0.45,0.22,0.11,0.22,0.11,0.11,0.11,0.22]],
[[67,70,79], 105 ,[[188,1]],[0.11]],
[[66], 108.8571 ,[[63,5],[172,2]],[0.11,0.22,0.11,0.22,0.9,0.22,0.11]],
[[66,78], 105 ,[[41,1],[60,1],[154,1],[162,1]],[0.22,0.22,0.22,0.22]],
[[66,75], 103.125 ,[[66,5],[129,1],[133,2]],[0.11,0.11,0.22,0.11,0.22,0.11,0.22,0.11]],
[[66,75,78], 101.6667 ,[[67,4],[134,2]],[0.11,0.22,0.22,0.22,0.22,0.22]],
[[66,72,76], 105 ,[[191,1]],[0.11]],
[[66,71,75,78], 105 ,[[81,1],[141,2],[155,1],[176,2]],[0.22,0.11,0.11,0.22,0.22,0.67]],
[[65], 109.5714 ,[[76,1],[129,4],[145,2]],[0.11,0.22,0.22,0.11,0.11,0.11,0.11]],
[[65,77], 113.5 ,[[64,1],[151,2],[157,1]],[0.22,0.11,0.22,0.11]],
[[65,71,76], 105 ,[[185,1]],[0.11]],
[[65,71,74], 105 ,[[94,1]],[0.45]],
[[65,70,77], 116 ,[[192,1],[194,1]],[0.22,0.62]],
[[65,69], 107.75 ,[[115,8]],[0.22,0.45,0.22,0.45,0.62,0.22,0.22,0.11]],
[[65,69,77], 105 ,[[192,1]],[0.22]],
[[65,69,72,77], 105 ,[[198,1]],[0.45]],
[[65,68,73,77], 105 ,[[188,1],[192,1]],[0.11,0.22]],
[[65,67,71], 108.75 ,[[95,2],[193,2]],[0.11,0.11,0.11,0.22]],
[[64], 107.1111 ,[[82,4],[129,1],[135,1],[152,3]],[0.45,0.22,0.22,0.22,0.28,0.11,0.11,0.22,0.11]],
[[64,76], 105 ,[[60,2],[123,2]],[0.22,0.11,0.22,0.22]],
[[64,72], 103.875 ,[[128,1],[184,6],[193,1]],[0.11,0.11,0.22,0.11,0.28,0.22,0.22,0.45]],
[[64,67,72], 105 ,[[8,1],[64,1],[193,2]],[0.11,0.22,0.22,0.22]],
[[63], 109 ,[[155,1]],[0.22]],
[[63,75], 122 ,[[83,1],[157,1]],[0.06,0.11]],
[[63,72], 105 ,[[142,1]],[0.22]],
[[62], 114 ,[[163,2],[170,1]],[0.11,0.11,0.22]],
[[61], 117 ,[[167,1]],[0.22]],
[[60], 105 ,[[40,1],[163,1],[176,1]],[0.45,0.22,0.11]],
[[60,64], 107 ,[[19,2],[33,1],[152,2]],[0.11,0.22,0.22,0.22,0.28]],
[[60,62,66], 105 ,[[35,1]],[0.28]],
[[60,62,66,74,83], 105 ,[[35,1]],[0.11]],
[[59], 105.6667 ,[[94,1],[170,1],[176,1]],[0.11,0.11,0.22]],
[[59,71], 90 ,[[131,1]],[0.22]],
[[59,62,67], 105 ,[[1,1]],[0.11]],
[[59,62,67,85], 105 ,[[1,1]],[0.11]],
[[58,67], 105 ,[[0,1]],[0.22]],
[[58,67,76,88], 105 ,[[164,1]],[0.22]],
[[58,60,64], 105.6667 ,[[6,2],[8,4],[25,2],[50,2],[124,2]],[0.67,0.22,0.22,0.11,0.11,0.22,0.22,0.22,0.67,0.22,0.22,0.22]],
[[57], 110.5 ,[[40,1],[59,1],[181,1],[184,1]],[0.22,0.22,0.22,0.22]],
[[57,69], 90 ,[[106,1],[121,1]],[0.22,0.22]],
[[57,62], 105 ,[[53,2]],[0.11,0.22]],
[[57,60], 106.375 ,[[14,4],[33,12]],[0.22,0.45,0.22,0.22,0.22,0.45,0.22,0.22,0.62,0.22,0.45,0.22,0.22,0.22,0.45,0.11]],
[[57,60,65], 106.3824 ,[[8,2],[9,2],[25,2],[33,2],[36,6],[56,12],[145,2],[181,6]],[0.11,0.11,0.11,0.22,0.28,0.11,0.11,0.22,0.9,0.22,0.11,0.11,0.22,0.11,0.22,0.11,0.11,0.11,0.22,0.11,0.22,0.11,0.11,0.11,0.11,0.22,0.45,0.22,0.22,0.11,0.22,0.28,0.22,0.11]],
[[57,60,64], 105 ,[[45,2],[57,2]],[0.22,0.11,0.22,0.11]],
[[57,60,63], 106 ,[[4,2],[6,2]],[0.22,0.11,0.22,0.22]],
[[57,60,62], 106 ,[[26,2],[140,2]],[0.11,0.22,0.11,0.11]],
[[56], 105 ,[[53,1]],[0.11]],
[[56,68], 90 ,[[113,1]],[0.22]],
[[56,60], 105 ,[[21,1],[39,2],[48,1],[60,4]],[0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.22]],
[[56,59], 105 ,[[41,4],[60,2],[152,2]],[0.22,0.11,0.22,0.11,0.22,0.22,0.22,0.22]],
[[55], 107.875 ,[[5,2],[17,2],[19,2],[33,2],[49,2],[82,1],[92,1],[170,1],[181,1],[184,1],[186,1]],[0.11,0.11,0.11,0.28,0.11,0.22,0.22,0.11,0.22,0.67,0.45,0.22,0.22,0.22,0.22,0.22]],
[[55,67], 90 ,[[146,1],[153,1]],[0.22,0.11]],
[[55,62], 108.75 ,[[43,2],[185,2]],[0.11,0.22,0.22,0.22]],
[[55,62,67], 105 ,[[145,2]],[0.22,0.11]],
[[55,60], 109 ,[[63,1]],[0.11]],
[[55,60,64], 106.8615 ,[[14,2],[16,8],[20,1],[25,2],[29,8],[37,4],[38,2],[63,2],[64,1],[66,4],[67,10],[69,1],[76,4],[82,1],[94,3],[152,6],[182,2],[184,4]],[0.11,0.39,0.11,0.11,0.28,0.22,0.28,0.22,0.11,0.28,0.11,0.11,0.11,0.22,0.22,0.11,0.11,0.11,0.11,0.22,0.11,0.22,0.22,0.28,0.22,0.28,0.11,0.11,0.22,0.22,0.22,0.11,0.22,0.11,0.11,0.11,0.22,0.22,0.22,0.28,0.11,0.22,0.28,0.11,0.22,0.11,0.11,0.22,0.28,0.22,0.11,0.22,0.22,0.45,0.22,0.22,0.11,0.22,0.11,0.11,0.22,0.22,0.22,0.22,0.11]],
[[55,60,64,76], 100 ,[[67,2]],[0.11,0.22]],
[[55,60,64,72], 90 ,[[125,1]],[0.22]],
[[55,60,64,72,76,84], 105 ,[[20,1]],[0.28]],
[[55,60,64,67,76], 97.5 ,[[94,2]],[0.11,0.22]],
[[55,60,64,67,76,79], 97.5 ,[[165,1],[173,1]],[0.11,0.22]],
[[55,60,64,65], 90 ,[[76,1]],[0.22]],
[[55,59,65], 105.2 ,[[11,8],[37,4],[44,2],[46,4],[53,1],[59,1]],[0.11,0.11,0.11,0.11,0.22,0.11,0.11,0.22,0.11,0.22,0.22,0.11,0.45,0.22,0.22,0.22,0.45,0.11,0.11,0.22]],
[[55,59,65,69,77,81], 105 ,[[44,2]],[0.11,0.22]],
[[55,58,60], 108.25 ,[[25,4],[33,8],[47,4]],[0.45,0.22,0.22,0.22,0.11,0.22,0.11,0.22,0.11,0.11,0.11,0.22,0.11,0.11,0.22,0.11]],
[[55,57,64], 105 ,[[59,2]],[0.11,0.28]],
[[54], 109.3333 ,[[3,4],[184,2]],[0.11,0.22,0.06,0.22,0.22,0.11]],
[[54,59], 105 ,[[81,2]],[0.11,0.67]],
[[54,57,60], 105 ,[[53,1]],[0.22]],
[[54,57,60,63], 105 ,[[40,1],[59,1]],[0.11,0.11]],
[[54,57,60,63,72], 90 ,[[113,1]],[0.22]],
[[53], 107 ,[[9,6],[26,4],[53,2],[55,2],[63,1],[87,4],[99,1],[163,2],[186,1]],[0.28,0.22,0.11,0.11,0.11,0.22,0.11,0.11,0.22,0.22,0.11,0.11,0.11,0.22,0.62,0.22,0.11,0.22,0.22,0.22,0.22,0.11,0.11]],
[[53,65], 95 ,[[10,1],[125,1],[166,1]],[0.11,0.11,0.22]],
[[53,57,62], 105 ,[[56,2]],[0.28,0.11]],
[[53,57,60], 105 ,[[35,2]],[0.22,0.22]],
[[53,57,60,65], 108 ,[[9,2]],[0.11,0.22]],
[[53,56,61], 107 ,[[32,2],[192,2]],[0.22,0.22,0.11,0.22]],
[[53,56,59], 105 ,[[64,2],[170,2]],[0.22,0.22,0.22,0.45]],
[[52], 106.9231 ,[[14,4],[16,2],[19,2],[33,4],[41,4],[74,4],[82,1],[93,4],[96,1],[99,1],[129,12]],[0.22,0.28,0.11,0.22,0.22,0.11,0.11,0.11,0.11,0.22,0.28,0.22,0.22,0.22,0.22,0.11,0.22,0.22,0.22,0.11,0.22,0.22,0.22,0.22,0.11,0.11,0.22,0.22,0.11,0.22,0.22,0.11,0.28,0.22,0.22,0.11,0.22,0.11,0.28]],
[[52,64], 93.75 ,[[15,1],[146,1],[156,1],[166,1]],[0.11,0.11,0.45,0.22]],
[[52,54,58], 105 ,[[30,1],[48,1],[60,1],[186,1]],[0.22,0.22,0.22,0.11]],
[[51], 105.8571 ,[[34,2],[39,2],[81,2],[92,1]],[0.28,0.11,0.22,0.22,0.22,0.11,0.11]],
[[51,63], 90 ,[[153,1]],[0.11]],
[[51,58,61], 123.6667 ,[[64,1],[83,1],[190,1]],[0.06,0.22,0.11]],
[[51,58,61,67,73,79], 115 ,[[190,1]],[0.11]],
[[51,56,60], 107.5333 ,[[5,2],[22,2],[39,4],[48,1],[60,2],[62,2],[190,2]],[0.22,0.11,0.45,0.45,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.11,0.22]],
[[51,56,60,70,82], 113 ,[[60,1]],[0.22]],
[[51,55,61], 105 ,[[22,1],[34,2],[48,2],[190,1]],[0.22,0.45,0.22,0.22,0.11,0.22]],
[[51,54,59], 105 ,[[22,1],[41,1]],[0.11,0.22]],
[[50], 107 ,[[1,1],[16,2],[25,2],[42,2],[43,2],[61,1],[99,1],[100,1],[105,1],[176,2]],[0.22,0.28,0.22,0.22,0.11,0.22,0.11,0.22,0.11,0.11,0.22,0.11,0.45,0.22,0.11]],
[[50,88], 105 ,[[1,1]],[0.22]],
[[50,67,79], 105 ,[[61,1]],[0.11]],
[[50,62], 95 ,[[26,1],[168,1],[177,1]],[0.11,0.45,0.11]],
[[49], 106.3333 ,[[22,2],[47,2],[60,2],[83,2],[92,1]],[0.11,0.11,0.22,0.11,0.22,0.22,0.67,0.22,0.22]],
[[49,61], 90 ,[[153,1]],[0.11]],
[[49,53,56,61], 105 ,[[60,1]],[0.22]],
[[48], 106.6812 ,[[5,2],[8,2],[9,2],[16,2],[19,6],[25,2],[29,4],[33,10],[45,1],[47,6],[53,2],[56,6],[66,1],[67,6],[71,1],[74,4],[78,5],[87,4],[101,3]],[0.11,0.11,0.11,0.11,0.22,0.22,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.28,0.22,0.22,0.28,0.22,0.22,0.22,0.22,0.11,0.22,0.11,0.45,0.22,0.67,0.11,0.11,0.22,0.11,0.22,0.22,0.22,0.22,0.22,0.22,0.11,0.22,0.62,0.22,0.22,0.22,0.11,0.11,0.11,0.11,0.11,0.22,0.22,0.22,0.45,0.45,0.22,0.11,0.22,0.11,0.22,0.22,0.22,0.22,0.11,0.22,0.11,0.28,0.22,0.45]],
[[48,72,76,84], 105 ,[[45,1]],[0.11]],
[[48,67], 100 ,[[33,2]],[0.11,0.22]],
[[48,67,76], 90 ,[[78,1]],[0.11]],
[[48,60], 105 ,[[34,1],[51,2],[56,2]],[0.22,0.11,0.22,0.22,0.11]],
[[48,53,57,60], 105 ,[[54,1]],[0.45]],
[[47], 105.2857 ,[[11,4],[29,4],[73,1],[77,2],[105,1],[112,1],[184,1]],[0.28,0.11,0.22,0.11,0.28,0.11,0.22,0.22,0.67,0.22,0.22,0.11,0.22,0.22]],
[[47,59], 90 ,[[182,1]],[0.45]],
[[47,51,54,59], 105 ,[[41,2]],[0.11,0.11]],
[[46,58], 105 ,[[68,1]],[0.22]],
[[46,58,67,73,79], 115 ,[[158,1]],[0.11]],
[[45], 108.6429 ,[[56,6],[112,1],[116,6],[124,1]],[0.11,0.11,0.11,0.22,0.22,0.9,0.11,0.22,0.11,0.22,0.45,0.11,0.28,0.22]],
[[45,57], 102.5 ,[[38,2],[45,2],[185,1],[195,1]],[0.45,0.11,0.11,0.11,0.28,0.22]],
[[44,56], 107.25 ,[[39,6],[62,2]],[0.22,0.22,0.45,0.22,0.22,0.22,0.11,0.22]],
[[43], 107 ,[[29,4],[37,4],[65,2],[71,1],[72,1],[73,1],[79,6],[92,6],[124,3]],[0.11,0.11,0.11,0.22,0.22,0.22,0.22,0.22,0.11,0.22,0.22,0.22,0.11,0.11,0.22,0.11,0.22,0.22,0.11,0.22,0.22,0.06,0.22,0.22,0.22,0.11,0.22,0.11]],
[[43,55], 105 ,[[48,1],[91,4],[196,1],[197,1]],[0.11,0.11,0.11,0.11,0.22,0.11,0.11]],
[[42], 108.6667 ,[[30,2],[77,2],[140,2]],[0.11,0.22,0.22,0.11,0.06,0.22]],
[[41], 107.0769 ,[[36,6],[56,6],[145,1]],[0.11,0.11,0.22,0.11,0.9,0.22,0.22,0.22,0.11,0.22,0.22,0.22,0.11]],
[[41,53], 105 ,[[23,2],[28,2],[31,2],[36,2],[54,1],[88,1],[89,1]],[0.22,0.22,0.11,0.22,0.22,0.22,0.22,0.11,0.22,0.22,0.45]],
[[40,52], 105 ,[[18,2],[51,2],[64,1],[75,1]],[0.11,0.22,0.22,0.11,0.11,0.22]],
[[39,51], 109.9375 ,[[21,2],[22,1],[30,4],[34,6],[68,1],[97,2]],[0.22,0.45,0.45,0.06,0.45,0.22,0.22,0.45,0.67,0.11,0.11,0.11,0.22,0.62,0.22,0.11]],
[[38,50], 105 ,[[58,1],[84,1]],[0.11,0.22]],
[[37,49], 107.625 ,[[13,4],[32,1],[86,1],[90,2]],[0.22,0.22,0.22,0.11,0.11,0.22,0.22,0.22]],
[[36,48], 105 ,[[8,2],[16,2],[39,1],[52,1],[56,1],[64,1],[95,2]],[0.11,0.11,0.11,0.22,0.11,0.45,0.28,0.11,0.22,0.45]],
[[34,46], 116 ,[[32,1],[190,1]],[0.22,0.62]],
[[33,45], 105 ,[[70,1]],[0.11]],
[[31,43], 107.5 ,[[63,1],[85,1]],[0.11,0.11]],
[[31,43,67,71,74,79], 90 ,[[63,1]],[0.11]],
[[29,41], 105 ,[[12,1]],[0.45]]
];

	var node_index = 0;
	var bps = 60 / 60.0;  // Beats per second

	inf.do({

		var weight = 0;
		var random;
		var accumulator;
		var node = node_list[node_index];
		var temp=node[0];
		//var freq = node[0].midicps;
		//var dur = node[1] / bps;
		var dur = node[3][node[3].size.rand] / bps;
		var paths = node[2];
		var amp = node[1];

		// Get total statistical weight of connected nodes
		(0 .. paths.size - 1).do {|i| weight = weight + paths[i][1]};

		// Generate random value for choosing next node
		random = weight.rand;

		// Choose next node based on statistical weights
		accumulator = paths[0][1];

		node_index = block {|break|
			paths.size.do {|i|
				if ((random < accumulator), {
					break.value(paths[i][0])
					}, {
						accumulator = accumulator + paths[i + 1][1]
				})
			}
		};
m = MIDIOut(0);

		// Play
		//Synth(\my_synth, [\dur, dur, \amp, -3.dbamp, \freq, freq]);
		//Synth(\my_synth, [\dur, dur, \amp, amp/127.0, \freq, freq]);
		temp=node[0];
		//temp.postln;
		temp.size.do{|i| m.noteOn(16,temp[i] , amp-10);};
		temp.postln;
		node[0].postln;
		//m.noteOn(16, node[0], amp-50);
		//m.noteOn(16, 13, amp-50);
		//dur.wait+0.1.rand-0.05;
		dur.wait+0.1.rand-0.05;
		//m.noteOff(16, 13, amp-50);
		temp.size.do{|i|m.noteOff(16,temp[i] , amp-50);};
	})
});

t.start;


);

////c
//node_list[2].postln;


//m = MIDIOut(3)
//
//

//m.allNotesOff(16);


